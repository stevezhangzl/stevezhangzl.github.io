<!DOCTYPE html><html lang="zh-CN"><head><meta charset="UTF-8"><meta name="viewport" content="width=device-width,initial-scale=1,maximum-scale=2"><meta name="theme-color" content="#222"><meta name="generator" content="Hexo 6.0.0"><link rel="apple-touch-icon" sizes="180x180" href="/images/apple-touch-icon-next.png"><link rel="icon" type="image/png" sizes="32x32" href="/images/favicon-32x32-next.png"><link rel="icon" type="image/png" sizes="16x16" href="/images/favicon-16x16-next.png"><link rel="mask-icon" href="/images/logo.svg" color="#222"><link rel="stylesheet" href="/css/main.css"><link rel="stylesheet" href="/lib/font-awesome/css/all.min.css"><script id="hexo-configurations">var NexT=window.NexT||{},CONFIG={hostname:"example.com",root:"/",scheme:"Pisces",version:"7.8.0",exturl:!1,sidebar:{position:"left",display:"post",padding:18,offset:12,onmobile:!1},copycode:{enable:!1,show_result:!1,style:null},back2top:{enable:!0,sidebar:!1,scrollpercent:!1},bookmark:{enable:!1,color:"#222",save:"auto"},fancybox:!1,mediumzoom:!1,lazyload:!1,pangu:!1,comments:{style:"tabs",active:null,storage:!0,lazyload:!1,nav:null},algolia:{hits:{per_page:10},labels:{input_placeholder:"Search for Posts",hits_empty:"We didn't find any results for the search: ${query}",hits_stats:"${hits} results found in ${time} ms"}},localsearch:{enable:!1,trigger:"auto",top_n_per_article:1,unescape:!1,preload:!1},motion:{enable:!0,async:!1,transition:{post_block:"fadeIn",post_header:"slideDownIn",post_body:"slideDownIn",coll_header:"slideLeftIn",sidebar:"slideUpIn"}}}</script><meta name="description" content="socket网络编程系列之一"><meta property="og:type" content="article"><meta property="og:title" content="Socket网络编程-入门"><meta property="og:url" content="http://example.com/2022/02/22/Socket%E7%BD%91%E7%BB%9C%E7%BC%96%E7%A8%8B-%E5%85%A5%E9%97%A8/index.html"><meta property="og:site_name" content="SteveZhang博客"><meta property="og:description" content="socket网络编程系列之一"><meta property="og:locale" content="zh_CN"><meta property="og:image" content="http://example.com/images/image-20220222043112279.png"><meta property="og:image" content="http://example.com/images/image-20220222044912926.png"><meta property="og:image" content="http://example.com/images/image-20220222045503857.png"><meta property="og:image" content="http://example.com/images/image-20220222045530164.png"><meta property="og:image" content="http://example.com/images/image-20220222061132943.png"><meta property="og:image" content="http://example.com/images/image-20220222061212075.png"><meta property="og:image" content="http://example.com/images/image-20220222062526773.png"><meta property="og:image" content="http://example.com/images/image-20220222062807481.png"><meta property="og:image" content="http://example.com/images/image-20220222063117707.png"><meta property="og:image" content="http://example.com/images/image-20220222063359835.png"><meta property="og:image" content="http://example.com/images/image-20220222063511103.png"><meta property="og:image" content="http://example.com/images/image-20220222063650938.png"><meta property="article:published_time" content="2022-02-21T20:29:25.000Z"><meta property="article:modified_time" content="2022-05-17T03:51:37.000Z"><meta property="article:author" content="张龙"><meta name="twitter:card" content="summary"><meta name="twitter:image" content="http://example.com/images/image-20220222043112279.png"><link rel="canonical" href="http://example.com/2022/02/22/Socket%E7%BD%91%E7%BB%9C%E7%BC%96%E7%A8%8B-%E5%85%A5%E9%97%A8/"><script id="page-configurations">CONFIG.page={sidebar:"",isHome:!1,isPost:!0,lang:"zh-CN"}</script><title>Socket网络编程-入门 | SteveZhang博客</title><noscript><style>.sidebar-inner,.use-motion .brand,.use-motion .collection-header,.use-motion .comments,.use-motion .menu-item,.use-motion .pagination,.use-motion .post-block,.use-motion .post-body,.use-motion .post-header{opacity:initial}.use-motion .site-subtitle,.use-motion .site-title{opacity:initial;top:initial}.use-motion .logo-line-before i{left:initial}.use-motion .logo-line-after i{right:initial}</style></noscript><link rel="alternate" href="/atom.xml" title="SteveZhang博客" type="application/atom+xml"></head><body itemscope itemtype="http://schema.org/WebPage"><div class="container use-motion"><div class="headband"></div><header class="header" itemscope itemtype="http://schema.org/WPHeader"><div class="header-inner"><div class="site-brand-container"><div class="site-nav-toggle"><div class="toggle" aria-label="切换导航栏"><span class="toggle-line toggle-line-first"></span> <span class="toggle-line toggle-line-middle"></span> <span class="toggle-line toggle-line-last"></span></div></div><div class="site-meta"><a href="/" class="brand" rel="start"><span class="logo-line-before"><i></i></span><h1 class="site-title">SteveZhang博客</h1><span class="logo-line-after"><i></i></span></a></div><div class="site-nav-right"><div class="toggle popup-trigger"></div></div></div><nav class="site-nav"><ul id="menu" class="main-menu menu"><li class="menu-item menu-item-home"><a href="/" rel="section"><i class="fa fa-home fa-fw"></i>首页</a></li><li class="menu-item menu-item-archives"><a href="/archives/" rel="section"><i class="fa fa-archive fa-fw"></i>归档<span class="badge">18</span></a></li></ul></nav></div></header><div class="back-to-top"><i class="fa fa-arrow-up"></i> <span>0%</span></div><main class="main"><div class="main-inner"><div class="content-wrap"><div class="content post posts-expand"><article itemscope itemtype="http://schema.org/Article" class="post-block" lang="zh-CN"><link itemprop="mainEntityOfPage" href="http://example.com/2022/02/22/Socket%E7%BD%91%E7%BB%9C%E7%BC%96%E7%A8%8B-%E5%85%A5%E9%97%A8/"><span hidden itemprop="author" itemscope itemtype="http://schema.org/Person"><meta itemprop="image" content="/images/avatar.gif"><meta itemprop="name" content="张龙"><meta itemprop="description" content=""></span><span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization"><meta itemprop="name" content="SteveZhang博客"></span><header class="post-header"><h1 class="post-title" itemprop="name headline">Socket网络编程-入门</h1><div class="post-meta"><span class="post-meta-item"><span class="post-meta-item-icon"><i class="far fa-calendar"></i> </span><span class="post-meta-item-text">发表于</span> <time title="创建时间：2022-02-22 04:29:25" itemprop="dateCreated datePublished" datetime="2022-02-22T04:29:25+08:00">2022-02-22</time> </span><span class="post-meta-item"><span class="post-meta-item-icon"><i class="far fa-calendar-check"></i> </span><span class="post-meta-item-text">更新于</span> <time title="修改时间：2022-05-17 11:51:37" itemprop="dateModified" datetime="2022-05-17T11:51:37+08:00">2022-05-17</time></span></div></header><div class="post-body" itemprop="articleBody"><p>socket网络编程系列之一</p><span id="more"></span><h2 id="Socket网络编程-入门"><a href="#Socket网络编程-入门" class="headerlink" title="Socket网络编程-入门"></a>Socket网络编程-入门</h2><h3 id="网络模型-对应关系"><a href="#网络模型-对应关系" class="headerlink" title="网络模型-对应关系"></a>网络模型-对应关系</h3><p><img src="/../images/image-20220222043112279.png" alt="image-20220222043112279"></p><h3 id="Socket-与TCP、UDP"><a href="#Socket-与TCP、UDP" class="headerlink" title="Socket 与TCP、UDP"></a>Socket 与TCP、UDP</h3><p>socket 是什么呢？其实socket 就是一个套节字，在不同的操作系统，安卓或者是windows 或者是mac 当中都有提供套节字a p i 的一个基础的功能。那么我们通过调用socket 的对应的功能去使用t c p 或者是u d p 进行对应的一个数据发送。</p><p>那么为什么要这样呢？这里来给大家进行一个扩展。在我们前面我们有说到对于计算机而言，我们把数据从a 手机传递到b 手机。我们最主要的就是把一个数串传递过去，对吧？那么我们怎么样才能传递过去呢？我们需要把这个数据加工成最底层的一个网络的电信号或者是光信号进行一个传输。那么在这个过程当中，我们是不是一定要去关心我们的一句话，比如说hello word这个字母，它究竟变成了光信号的哪一个东西呢？</p><p>其实我们不需要关心这个东西。因为如果说你每次都要去关心这些东西的话，那么对你的程序开发也是非常非常麻烦的。而且对于整个系统的稳定性而言，是非常不健壮的。所以说就会出现我们前面所说的网络汽车模型。</p><p>那么在这里呢也给大家再进行一个巩固。<strong>打个比方</strong>，我们从a 公司和b 公司之间的一个关系，a 公司要把一个货物发送到b 公司，对吧？首先a 公司要做什么事情？a 公司要把这个货物进行一个包装，对吧？他把货物进行包装，那么这个包装它其实就是一个层面的一个操作。就它的底层公司与公司之间的一个约定，你需要把这个货物进行一个包装，对吧？再后面一点，首先包装了之后的话，你要把你包装的这个货物进行一个标签的打包，对不对？你要打包。那么这就是说货物部门之间的一个关系了，你贴标签、打包以及后面你要进行运输过程当中呢。就涉及到你可能要走水路，走空运，走铁路，对吧？这个时候你要涉及到，你要贴上你对应的一个方式，你的车厢号。那么这个就是物理层面的一个传输了。所以说当你把你的货物丢到了一个火车上的，到了对应的地址的时候，火车上拿出来。他首先要看见的是什么？看见的就是我是从什么地方到达我这里来的，那么我需要做什么事情呢？我首先把我的这个车厢到了，对吧？我就把它卸货。然后呢，我看一下标签，哎，标签上面说的是到哪一个哪一个区，对吧？我要把它丢到哪一个区里面去。然后区里面呢它又一层一层的往下走，最终呢才能走到b 公司去，这就是不同协议层之间的一个交互过程。而如果说你一个公司要去管究竟这个货物走空运还是走水运，通过什么样的汽车去送你自己去把这个货物送到b 公司去。那么其实非常浪费人力的，你自己去把你的货物送到公司，一个货物还好多个货物的话。其实就非常麻烦了，所以说就不同层级之间的一个关系，运输交给快递来做就好，对不对？</p><p>所以说这就是咱们的一个传输模型的一个七层网络模型的概念。之所以存在的一个原理，那么socket 与tcp udp之间的关系呢，<strong>其实socket 就是对tcp udp 之间的一个封装</strong>。</p><p>还有我们来说一下<strong>socket 究竟是什么</strong>？简单来说socket 就是i p 地址与端口的一个结合协议。这个协议名称叫做RFC 793。那么大家可以去查询一下，是一种地址与端口结合的一个描述协议。</p><p>因为它是一个描述协议，对不对？它用来描述什么，<strong>描述地址与端口之间的一个关系</strong>。这个就是i p 地址端口，就是我们电脑上所谓的端口。这里呢给大家提一下端口。比如说你访问一个网站，那么你访问的其实就是80端口，就是咱们约定好的一个h t t p 协议的一个简单的端口。其实就是80端口。</p><p>接着往下走，TCP&#x2F;IP协议的相关a p i 的一个总称是网络a p i 的集合实现，对吧？它其实呢就是对t c p i p 的协议，相关的a p i 的一个总称。TCP&#x2F;IP 它有对应的协议，对吧？说起来就是对这些协议的一个实现一个描述，然后集合在一起。</p><p><strong>涵盖了什么呢</strong>？涵盖了我们的流套接字，以及咱们的其实这个地方就是咱们的t c p 和udp 了。</p><p><strong>那我们来说一下socket 的一个组成与作用</strong>。首先在网络传输当中，它是用于标识两个端点之间的连接，什么意思呢？在传输的整个过程当中，比如说你的a 计算机和b 计算机之间，我们通过socket 进行连接。</p><p>在你看来，认为是物理层面的连接吗？不一定，它物理层面不一定是时时刻刻都有连接的，它有可能断开，有可能在你这个程序之外它还连接。所以说你的程序这个socket 并不管物理层面的一个连接，它是用来标识的，是唯一标识两个端点之间的连接。</p><p>那我们接着往下说端点包括什么？包括i p 和的一个端口 Port。<br>一个计算机有非常多的端口，那么它对外有一个i p 我们的作用。所谓的作用就是标识这个i p 一个i p 代表一个计算机的话，它就代表的是两个计算机之间某一个端口上面连接，这个怎么说呢？</p><p>就好比你的家i p 就是你的家，端口就是你的窗户，通过你家卧室的窗户打开门，就能看见你对面女神的那个窗户口，对吧？这个之间你们之间通过眼神进行连接，对吧？所以说这就是端点与端点之间的一个连接。</p><p>它最主要的四个要素就是<strong>客户端的地址</strong>，<strong>客户端的端口</strong>以及<strong>服务器端的地址</strong>和<strong>服务器端的端口</strong>。</p><p>我们接着往下讲socket 的一个传输原理，在这里给大家描述的是一个客户端和一个服务器。</p><p><img src="/../images/image-20220222044912926.png" alt="image-20220222044912926"></p><p>首先呢我们的客户端呢它有一个地址等于i p 一，服务器端的地址等于i p 二，就是满足两个条件之一了，对吧？i p 地址有了。那么首先第二点我们来说一下它的端口是什么，端口是二五端口，对不对？二十五号端口。<br>那么我们的i p 地址加上端口，就等于咱们的socket 的一个协议。同时呢它做了一个什么作用？就是email 对吧？它是一个email 服务，就是咱们那个web server。我们的数据呢其实就通过咱们的这个i p 地址与端口之间的这种连接方式，我们就能实现客户端与服务器端之间的一个交互。你要去取一个邮件，对吧？你就通过二十五号端口去取邮件说唉我有没有邮件，有的话，我去给我一个返回，对吧？这个过程就是咱们那个socket 它的一个传输原理的一个过程。</p><p>再往下细讲，socket. 当中的一个t c p，我们来说一下t c p 是什么呢？t c p 是面向连接的一个通讯协议，面向连接对方。要注意一点是面向连接的，它是通过三次握手建立连接通讯完成时要拆除连接。就说你和你的女神要进行连接的时候，你首先要问他一下，哎，你有没有空啊，我可不可以给你说说话。然后你的女生跟你说，哎，我有空对吧？那么这个时候呢才会进行到第三次说，哎，好吧，我们现在连接连接之后呢，那么你们之间就可以交流进行谈话了。然后后面到拆除连接，拆除连接就是说你们两个之间说哎，我要走了，我有事我要走了，对面就说好吧，那你走吧。然后你对面说，那我就能走了，然后对面说好吧，你走了，然后最后你走了，他断开了，他也不再关注你的窗户了。那么你们两个之间就不会再经过窗户之间的一个对望了，对吧？你要告诉他 就走了，对面的人才知道。接着我们往下说，由于t c p 是面向连接的，所以只能通信于端到端的一个通信。什么意思啊？你在看你的女神的时候，你在跟你的女神之间进行交流的时候，你是不能去看其他人。这就是t c p 的一个东西。你在某一个时刻你只能去连接到它的某一个端口。所以说它是端到端的一个通信，是面向端到端的一个通信。</p><p>我们再说一下u d p，u d p 这个东西啊跟t c p 差别是蛮大的。首先第一点u d p 是面向无连接的通信方式，你不需要连接。u d p 的数据包括<strong>目的端口号</strong>和<strong>原端口号</strong>的信息。<br>什么意思呢？u d p 的数据里面它涵盖了一个目的的端口号，就是说包括了目标的端口号和你自己的一个端口号。你在对外说的时候，比如说现在你要说一句话，对你的女生讲对吧？这时候你你女神是不在的，你是可能说给了他的妈妈，你给他说，我想要对某某人说，哎，我喜欢你，对吧？这句话首先呢你说出这句话的时候，你妈妈作为一个转接者，那么她给她的女儿讲的时候怎么说呢？哎，某某某某公子对你说了一句，我喜欢你这句话，对不对？<br>他的妈妈之所以能够找到他的女儿，那么就一定能够知道说你是对他女儿说的。那么这时候就包括了目标端口号。当他妈妈在转述这句话的时候呢，其实就包括了说某某公子，对吧？某某公子就是原端口号。哎，对，就是说的你。<br>由于通讯是不需要连接的，所以说可以实现广播的发送并不局限于端到端之间的一个发送。这个东西很简单，假如说你是一个老师要传输学校的一个通知，让你的班上去，对吧？你是一个一个学生的，找学生对他说某一个安排呢，还是说你在上课的时候直接对着全班说一下这样来的哈，对吧？这个时候就是t c p 和u d p 最大的区别了，t c p 是一个一个个的来。那么u d p 你可以在班上直接说，哎呦，吼一句，明天不上课对不对？这个东西就完成了。<br>那么ok 这就是咱们的一个u d p 的一个协议。当然。</p><p>我们后面还会讲解一下t c p u d p 具体的一些区别。</p><p>我们来说一下t c p 的一个传输图解。</p><p><img src="/../images/image-20220222045503857.png" alt="image-20220222045503857"></p><p>t c p 的传输图解，一个设备传输到服务器上。唉，它首先是进行一个t c p 的数据发送，同时呢或它会收到一条t c p 的回复，代表这条数据收到了。那么这个回复呢并不是由你来完成的，而是t c p 层面，数据层面已经完成了这个工装。当你要发送一个数据的服务器的时候，其实这条数据只有两种状态，一种是发送成功，一种是发送失败。只有这两个状态，只有成功与失败，没有说发送一半，他接收到一半的情况一定是你发送过去，他真的收到了。同时他给你了一次回送之后，他收到了这条数据才代表成功了。所以他只有两个状态，要么成功，要么失败。</p><p><img src="/../images/image-20220222045530164.png" alt="image-20220222045530164"></p><p>udp就不一样了，他只管发送数据，他不管回送的，他只管把数据往下发。他不管回送的，比如说你现在去班上给那些学生说明天不上课吧。哎，假如这个学生他没在班上怎么办？你难道还单独去找一下这个学生？不会的，u d p 其实不会的，他直接就吼一句，明天不上课，ok 完了就完了。他对全班同学一说，说完了就完事了，不存在一个某个学生，他有没有听到要对你进行一个反馈，不存在这个东西，不存在说每个学生还要对你说，哎，我听到了，我明天不会来上课了，不存在这个东西。</p><p>所以说这就是u d p 和t c p 最大的一个区别。好的，我们本小节讲了一个t c p u d p 的一个图解，也讲了咱们的socket 究竟是一些什么东西。那么我们前面两个小节都讲了一些理论的知识，后面一个章节我们会给大家讲解一下一个实际的案例。那么在讲解实际的案例之前呢，给大家说一下一个cat serious i p u d i c a t i o n 就是咱们所谓的c s 模型。在t c p i p 协议当中，两个之间的主要方式就是。<br>c s 模型c s 其实就是客户端与服务器之间交互的一个模型，就称之为c s 模型。最主要的目的就是协同网络当中的计算机资源，服务器模式进程间的数据共享。为什么要有c s 模型？比如说你访问一个网站，你有没有想过为什么这个网站一定要部署在服务器上？这个呢其实也蛮好理解的。比如说你自己做一个网站，你难道把你的这个网页发给全世界的每个人都发一份备份给他，说我的网站是这个。然后呢，你的网站有更新的时候，你难道给全世界的人都说一下你的网站有副本更新的，全部叫他们更新一下吗？不会的，你直接把你的网站部署在一个服务上当某人真正需要看的时候，他通过这个c s 模型，他的客户端去访问你的这个服务器，得到你的网站，来看你的网站。所以</p><p>说这就是c s 模型，也就是协同的计算机当中的一个网络资源服务器模式以及进程间的一个数据共享。<br>进程间的网络数据模型共享呢，其实这个也蛮简单的。在你的实际的开发过程中，可能你的某一个软件提供的某一个服务，对吧？比如你现在一个网站，你自己的有有一个程序提供了一个一加一等于二的这个过程，你不想其他软件再去实现，一加一等于二的这个过程。那么你可以把你的这个软件对外暴露出去，说我可以实现某个数据加上某个数据，等于某个数据的过程。其他人呢就只需要把前面两个数据传递给你，然后他就能得到他的结果，这就是进程之间进行数据共享。常见的呢就是f t p ，sm t p 和h t t p 这就是本小节主要的讲解。</p><h3 id="Socket-TCP牛刀小试"><a href="#Socket-TCP牛刀小试" class="headerlink" title="Socket TCP牛刀小试"></a>Socket TCP牛刀小试</h3><h3 id="报文、协议、Mac地址"><a href="#报文、协议、Mac地址" class="headerlink" title="报文、协议、Mac地址"></a>报文、协议、Mac地址</h3><p>同学们，我们前面一个章节来讲解了一些简单的代码，那么在这里呢我们紧接着要进行的是一些理论知识的一个扩充。<br>之所以要讲这些理论知识，并不是说这些理论知识你一定能够在后面的开发当中能够用上，但是这有助于你对整个socket体系的一个了解，以及也是扩充你的一个思维上的一种思考方式的一种额外知识点。<br>所以说我认为理论还是蛮重要的。<br>首先我们来讲报文段。<br><strong>什么是报文？</strong><br>报文是指tcpip协议传输过程呢起着路由导航作用的一个东西。<br>那么在tcpip协议当中，你要发送一个数据到b客户端。<br>就拿我们上一节所讲的demo来说，你要从a这个进程发送一个数据到b进程，它其实并不是说简单地把一个字符串转换成byte数据传递过去而已。它在整个过程当中还需要把拜托数据进行一定的报文解析，然后加上对应的字节头，然后再把这个字节头信息传递到b程序。<br>然后在b程序当中，呢，他会把头解析开之后，最终得到我们后面的报文段。然后也就是咱们的一个buffer数据。<br>拿了buffer数据之后再丢给应用层，应用层最终再把buffer数据解析成咱们的这个字符串，也就实现了咱们一个字符串的一个交互过程。<br>它的主要作用呢，报文段是用以查询各个路由段的ip地址、交换协议的ip数据包，那么这个报文数据呢就包括这些信息，同样的报文充当整个tcp协议数据包的一个路由功能。<br>报文在传输过程中是会不断地封装成组封装成包、封装成针来进行传输。</p><p><strong>那么这些东西呢主要的目的是为了什么？</strong></p><p>当你的一个数据过于太大了时候，那么他会把你的一批大数据转换成对应的一些组合，是包或者是帧，然后解析成一个一个小的数据点，然后通过小的数据点传输过去。</p><p>比如说你想发送一个大文件，对吧，文件是一个很长很长的一个包数据，但是呢你在发送的过程当中，它是需要不断的校验的，tcpip协议当中是先要发送，然后收到一个返回的信息，对不对？它是有一个校验的过程，所以说我需要先发送一部分过去，然后呢在回送这一部分成功与否，那么整个过程呢它会把你的整个buffer解析成很多很多小的buffer，然后在前面加上一定的咱们的一个报文头，然后呢进行一个批量的发送，每一批数据它都有一定的校验作用。<br>封装的方式呢就像我说的，就是在一些控制信息上面加上一个头部及报文头。</p><p>然后后面来说一下我们所谓的<strong>传输协议</strong>。顾名思义就是一种规定、一种约束。<br>约定待遇配置在网络传输过程依然是适用的，网络传输的流程之所以是健壮的、稳定的，其实也是得益于咱们的一个基础的协议的构成，必须要双方遵守共同的协议。<br><strong>简单来说就是a到b的一个传输数据，b能够识别，反之b返回给a的传输数据a也能识别，这就是协议。</strong><br>两个人之间遵循这样一个协议的关系。<br>那我举个例子来说，你想要打电话给你的妈妈，那你首先需要进行一个拨号，然后你的妈妈手机会进行响铃，然后你妈妈接电话，然后呢跟你进行通话，你说一句话，他回一句话，对吧？<br>然后你们直接进行一个交互的一个过程。</p><p>那么在这里你首先是需要进行拨号，你妈妈电话才能够响铃，同时他要接听电话之后，你们俩这样才可以进行通话。那么这整个过程当中要经过一系列约定好的、规定好的一个过程，这就称之为协议。</p><p>那么同样的，你去访问一个网站，你首先是需要输入这个网站的地址，那么它需要进行一个网站的一个地址查询，然后呢去访问这个网站对应的服务器上面的ip地址和端口号，然后呢网站会返回它的首页信息给你，那么整个过程就依次往下进行交互，所以说这样的一个过程就称之为传输协议。</p><p>那么第三点，我们来讲一下<strong>mac地址</strong>。<br>mac地址呢是一个media accept control的一个缩写，译为媒体控制访问。<br>媒体访问控制或称之为<strong>物理地址</strong>、<strong>硬件地址</strong>。<br>在所有所有的硬件地址上都有这样的一个信息，叫做mac地址，无论是你的手机还是。<br>你的路由器，还是你的电脑，以及你的每一台通讯设备，其实都有一个地址叫做mac地址，其实它用的重就是标识这个物理设备它在网络上的一个地址。<br>那mac地址其实是有限的，mac地址用来定义网络设备的一个位置，对吧</p><p>形如：44-45-53-54-00-00 就是一个mac地址，其实就是与你的身份证类似，你有你的身份证，每个人都有自己的身份证，那么就用来标识你这个人。那么每一台可以上网的设备它都有这样的一个mac地址，用来标识这个设备它的位置。</p><p><img src="/../images/image-20220222061132943.png" alt="image-20220222061132943">哎我们来看一下，这是一个手机端的一个检测图，我们来看一下这里面有些什么样的信息。<br>在这里我们可以看到安卓对吧系统是安卓，然后呢有一些蓝牙版本啊什么什么之类的。<br>那么我们在这里呢并不关注这些东西，我们。<br>需要关注的是什么mac地址在这里。</p><p>这就是咱们的一个mac地址，当然这前面还有一个b s s id，然后它也是一个类似mac地址一样的东西，它是一个无线的网络的一个他自己的一个网卡的一个地址。<br>所以说这个地方那它是和mac地址非常类似的。<br>当然下面还有一个咱们的ip地址，是咱们当前的一个网络的ip地址，对吧，以及这边有咱们的一个普通网络的一个信息。<br>好了，我们再接着往下看一下。</p><p><img src="/../images/image-20220222061212075.png" alt="image-20220222061212075"></p><p>这是第二幅图。<br>第二幅图上的话把上面的一些细节进行一个简单的归类、总结。那我们接着来看一下ip地址，这是咱们的一些基础的ip信息的一个设置，以及咱们的mac地址对吧那么可以说咱们每一台设备都有这样的信息的存在，有咱们的ip地址，有咱们的mac地址。</p><p>我们之所以有ip地址。其实也是因为咱们先要有mac地址，mac地址代表你这台硬件设备的一个物理地址，同时你的i p地址呢是当前局域网根据你的mac地址分配给你的一个临时的、可用的一个ip地址而已。</p><h3 id="IP、端口、远程服务器"><a href="#IP、端口、远程服务器" class="headerlink" title="IP、端口、远程服务器"></a>IP、端口、远程服务器</h3><p>我们上一个章节来讲解了一下咱们那个报文、mac地址，以及咱们的一些协议方面的一些信息，那我们本章节来讲解一下咱们的ip以及咱们端口、以及远程服务器的概念。<br>本章节呢我会用一些示意图给大家讲解一下基础的一些原理，尽可能的让大家不感到枯燥。<br>好了，我们首先来说一下ip地址。<br>ip地址即互联网当中的一个协议地址，缩写为一个ip地址。<br>那么当然上面就是咱们一个互联网的一个协议地址，是分配给网络上使用，网际协议设备，数字标签。<br>常见的ip地址分为ipv4和ipv6两大类。</p><p>那我们来看一下，ip地址由三十二位二进制组成，常以192.168.0.1的形式出现</p><p>xxx.xxx.xxx.xxx<br>每一组叉叉代表着小于或等于255的十进制数，当然它是大于零的。</p><p>比如说208.80.152.2</p><p>后面我们来说一下ip地址分为abcd一大类，其中e类属于特殊的保留的地址，总的数量是多长啊总的数量是四十二亿个。<br>最终的时候是在二零幺幺年二月三日的时候，其实所有的地址就已经被分配尽了，所有的ip地址其实已经被分配完成了，你现在所用的ip地址其实并不是整个因特网的一个ip地址，你的ip地址其实只是一个局域网类的一个地址，你的局域网上面可能还有局域网。<br>那么一直到整个因特网的时候呢，它的那个地址其实是已经固定好了，不可变的。<br>如果主机号全部都是1，那么这个地址直接为广播地址，就比如说1.1.1.1，这就是一个直接广播地址，</p><p>地址255.255.255.255 受限的广播地址代表着你当天局域网的一个广播地址。<br>你如果说使用udp往这个ip地址发送信息，那么你的局域网内的其他设备全部会收到你的udp的广播。</p><p>如果说你往1.1.1.1的这个地址发送一个udp的话，理论来说它会往整个因特网发送一个udp协议，但是其实它是会被对应的局域网的防火墙所拦截，并不会发送出去。<br>紧接着来说一下ipv6，因为ipv4的一个数量是有限的，而且比较少，四十二亿了，所以说它已经被分配完成了。<br>那么在后面呢为了解决新增的一些设备在因特网当中的一个地位，就提出了i p v6的概念，总共有128位长ipv6的地址表达形式一般采用32十六进制数，也可以想象成是1632。</p><p>有两个逻辑部分组成，这六十四位的网络前缀和一个六十四位的主机地址，主机地址常常是根据物理地址自动生成，这个地方的主机地址呢就是一般而言是会根据你的mac地址啊或者是你的一些硬件设备信息来组成。<br>那么一个六十四位的网络前缀呢就在代表着你的当前网络的一个状态，那么加在一起其实就形成了你的ipv6地址，这就是一个ipv六地址，看起来比较复杂。</p><p><img src="/../images/image-20220222062526773.png" alt="image-20220222062526773"></p><p><strong>ipv6和ipv4之间的关系是什么？</strong><br>因为ipv6是大于ipv4的，它的数量是大于它的，同时ipv4的地址一定是可以转换成一个ipv6的一个地址的，但是ipv6的地址是不一定能够转换成ipv4的地址。</p><p>那我简单来说一下第二个大点<strong>端口</strong>。<br>如果说把ip地址当作一间房子端口，就是进入这个房子的门或者是窗户，这是咱们之前提过的概念，在不同的窗户后有不同的人。<br>那么房子当中的用户与外界交流的出口就是咱们的房子和端口组成了这个人对外交流的一个出口。<br>外界的鸽子也就是信息飞到不同的窗口，也就是给不同的人传递信息。<br>那么你在一个房子里面有不同的人，就代表着你的不同的程序的进程，而外面不同的鸽子飞来的时候，就代表着不同的进程发送信息。<br>从0到1023端口以及1024到49151端口都是特殊端口。<br>那么特殊端口呢后面我会补充到一份文档当中，特殊端口里面有非常多的一些特殊意义。<br>那么这些端口呢是我们不能够直接使用的一个端口号地址，这是一些基本的一些特殊端口号。</p><p><img src="/../images/image-20220222062807481.png" alt="image-20220222062807481">那么首先我们来说一下二零二幺号端口一般会用作于f t p协议，它是一个tcp的一个端口号。<br>二十二号端口呢。<br>一个s s h，二十三号是care night，二十五号是s m t p。<br>当然五十三号是dns。<br>你说之所以能够访问一个网站，其实是因为它首先去进行一个dns解析，然后拿到你的域名对应的i p地址和端口号之后才能够进行访问。<br>那么当然还有t f t p、h t t p对吧，h t p是咱们非常常见的八零端口，还有咱们邮件协议等等，还有h tt ps是四四三协议。</p><p>上面来讲了下特殊的端口，那么紧接着往下说，计算机之间依照互联网传输层面的tcpip协议通讯，不同的协议对应的不同的端口号，这是我们上面已经说。<br>后面的49152到65535端口是属于动态端口范围。<br>就比如说我们之前客户端连接到服务器的时候，生成的这个端口号，其实就是处于这个区间的一个动态的一个端口。<br>没有端口是可以被正式的注册使用的，就是说你不可能说某个端口号就是我一定要用的，你不能对外面的人说这个端口号就一定是我用的，外面的人不能用这个端口不能这样的，这个端口号都是一个动态的端口。<br>所以说你不能够固化它。<br>那么来说问题第一点，端口号的总数是六五五三六，那么能够建立多少个连接？<br>六五三六个?<br>其实不是。<br>这个地方的六五三六是代表着你自己的本地的电脑的端口号。<br>那么这个端口号呢有几个点，首先端口它对应的ip你可以理解为ip，就是房子，端口就是窗户。<br>不同的ip就是不同的房子。<br>所以说不同的房子之间就有不同的这个端口号。<br>也就说你的电脑如果说一旦具备多个ip地址的一个方法的话，那么你可以有多个端口号。<br>也就是说你的端口号虽然说每一个ip地址都是这么多，但。<br>在你有多个ip地址的情况下，你的本地的电脑可以建立的连接数会远远大于六五三六个。<br>当然了，你依然是有限的，但是对于服务器而言，端口是复用的。<br>比如说服务器他监听八零幺端口，无论多少个客户端来，他都是通过把你号端口进行交互的，不会创建额外多余的端口。<br>来说一下数据传输的一个层次，这是咱们的之前说的四层模型。</p><p><img src="/../images/image-20220222063117707.png" alt="image-20220222063117707"></p><p>程序也就咱们数据进入到传输层面的时候，传输层面有一个udp的数据，那么udp数据他会干一件事情，加上一个udp的头部，进入到后面的一个internet课程，那么这时候会进入ip数据。<br>ip数据呢前面会被加上ip header，也是ip头部，他会把前面的udp的这个一个整体全部转换成ip的一个数据，前面加上一个ip的投。<br>那么再到后面数据链接层的时候，它会把你上面的整个协议全部转换成一个真数据，代表的一帧数据，那么它会有一个帧的头部和帧的尾部。<br>这样的话它发送给b的手b的链路层，它会把头部和尾部去掉，然后得到ip数据层，往上一次丢，最终到程序层的时候又是咱们的原始数据了。<br>所以说咱们数据的发送过程是会经过层层的一个头部的追加。</p><p>那么来说一下<strong>远程服务器</strong>是什么?<br>远程服务器一般而言局域网，也就是指你家里面或者是你公司里面的网络都是属于局域网的。<br>我和你们的电脑之间是属于互联网的，而非局域网。<br>我的电脑和你的电脑之间的关系属于互联网的关系，而不是局域网，但是你的电脑和你的手机之间的关系是属于一个局域网，当然你的手机很简。<br>和电脑要连接同一个无线路由器才行。<br>默认的我的电脑是无法直接链接到你们的电脑的，因为你们的电脑在你们的局域网当中我的电脑在我的局域网当中，你虽然电脑上有一个ip地址，但是那个ip地址并不是你的互联网ip地址，而是你的局域网ip地址，我的电脑上也有ip地址，我的地址呢也是我的局网地址。<br>所以说我就算知道你的ip，只知道你的端口，你能够建立一个socket的一个服务器，但是我是无法连接你的，我连接的永远是我的这个局域网进行扫描的。<br>如果说我想要连接你怎么办呢？<br>看后面。</p><p><img src="/../images/image-20220222063359835.png" alt="image-20220222063359835"></p><p>这是咱们的一个局网里面的一些设备，这个是另外一个局网里面也是一些设备。<br>我们尝试把这台电脑跟这台电脑之间进行连接，传输数据能不能呢？<br>对不对？<br>这也是说了两个局域网之间内部的设备是无法直接进行通讯的，无法直接进。<br>连接的。<br>你可以说哎为什么你的qq可以给我的qq发送消息，那么一定是你的手机跟我的手机之间直接连接的吗？<br>不是。<br>其实是这样的，这也是一个局域网这也是另外一个局域网。</p><p><img src="/../images/image-20220222063511103.png" alt="image-20220222063511103"></p><p>我们通过一个服务器，这个服务器来具备的外网地址，就我们前面说的ipv四、ipv六，它前面都有一部分已经分配的地址，分配的这个地址就是咱们整个互联网外部的一个id，这部分地址是已经分配出去了，已经是固定的。<br>比如说咱们的一些政府的服务器，或者说咱们的主干上面的一些服务器，它的ip地址永远是固定的，而且是一个对外所有的设备都有效的一个ip地址。<br>你的电脑连接到服务器，然后呢服务器呢也连接到我的电脑，然后就实现了一个数据的交换，你把数据先发送到服务器，服务器呢再把数据通知到我，ok。<br>这就实现了我们之间的数据交互，也就是qq的一个作用。<br>qq它之所以能够你发送下去给我也是这样。<br>请接着我们来说一下我们的一个web请求流程。</p><p><img src="/../images/image-20220222063650938.png" alt="image-20220222063650938"></p><p>你的电脑去访问一个网页，你请求一个网页的时候，你的地址是幺九二点幺六八点幺点幺幺二，这个地址是你的局域网地址幺九二点幺六八。<br>遇到这样的地址一定是你的局有网地址，那么外网服务器的地址你要想访问的地址一定是一个外网服务器的地址，它的地址是什么幺幺零点九、零点四、五点六，这是一台外网地址的服务器。<br>那么首先你要进行的是你访问，比如你访问百度，你首先你你输入的是一个百度点com，对吧？<br>那么这个东西是一个域名，首先它要进行一个域名服务器的一个查询，所以说它会经过一个域名服务器的一个udp五三的这个端口。<br>下面我们也说了，五十三号端口是一个udp的一个协议端口，去查询它的地址，你的电脑就会拿。<br>好，想访问的这个百度这个服务器的具体的地址以及它的端口号。<br>他的地址假如他就是幺幺零点九、零点四、五点六，它的端口号是什么呀？<br>你访问网页端口号永远都是八零后，当你没有指定的情况下，那么就或者是八连号端口就进行一个http的协议，ok，就进行交互，然后你们两个人就可以进行传数据了。<br>当然对https就是443号端口号，都是tcp协议。<br>我们所谓的http或者是h tt ps，其实都是基于tcp进行的一个封装。<br>好的。<br>这就是我们本章节的一个主要的一些知识点。<br>那么下个章节呢我们会开始讲解一下udp相关的一些知识点，以及udp的案例。<br>好的，谢谢大家。</p></div><footer class="post-footer"><div class="post-nav"><div class="post-nav-item"><a href="/2022/02/16/Android%20-%20%E5%9C%A8Fragment%E4%B8%AD%E8%A7%82%E5%AF%9FLiveData%E6%97%B6%EF%BC%8C%E4%B8%BA%E4%BB%80%E4%B9%88%E8%A6%81%E4%BD%BF%E7%94%A8viewLifecycleOwner/" rel="prev" title="Android - 在Fragment中观察LiveData时，为什么要使用viewLifecycleOwner[转]"><i class="fa fa-chevron-left"></i> Android - 在Fragment中观察LiveData时，为什么要使用viewLifecycleOwner[转]</a></div><div class="post-nav-item"><a href="/2022/02/23/Socket%E7%BD%91%E7%BB%9C%E7%BC%96%E7%A8%8B-UDP/" rel="next" title="Socket网络编程-UDP">Socket网络编程-UDP <i class="fa fa-chevron-right"></i></a></div></div></footer></article></div><script>window.addEventListener("tabs:register",()=>{let e=CONFIG.comments["activeClass"];if(CONFIG.comments.storage&&(e=localStorage.getItem("comments_active")||e),e){let t=document.querySelector(`a[href="#comment-${e}"]`);t&&t.click()}}),CONFIG.comments.storage&&window.addEventListener("tabs:click",t=>{t.target.matches(".tabs-comment .tab-content .tab-pane")&&(t=t.target.classList[1],localStorage.setItem("comments_active",t))})</script></div><div class="toggle sidebar-toggle"><span class="toggle-line toggle-line-first"></span> <span class="toggle-line toggle-line-middle"></span> <span class="toggle-line toggle-line-last"></span></div><aside class="sidebar"><div class="sidebar-inner"><ul class="sidebar-nav motion-element"><li class="sidebar-nav-toc">文章目录</li><li class="sidebar-nav-overview">站点概览</li></ul><div class="post-toc-wrap sidebar-panel"><div class="post-toc motion-element"><ol class="nav"><li class="nav-item nav-level-2"><a class="nav-link" href="#Socket%E7%BD%91%E7%BB%9C%E7%BC%96%E7%A8%8B-%E5%85%A5%E9%97%A8"><span class="nav-number">1.</span> <span class="nav-text">Socket网络编程-入门</span></a><ol class="nav-child"><li class="nav-item nav-level-3"><a class="nav-link" href="#%E7%BD%91%E7%BB%9C%E6%A8%A1%E5%9E%8B-%E5%AF%B9%E5%BA%94%E5%85%B3%E7%B3%BB"><span class="nav-number">1.1.</span> <span class="nav-text">网络模型-对应关系</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#Socket-%E4%B8%8ETCP%E3%80%81UDP"><span class="nav-number">1.2.</span> <span class="nav-text">Socket 与TCP、UDP</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#Socket-TCP%E7%89%9B%E5%88%80%E5%B0%8F%E8%AF%95"><span class="nav-number">1.3.</span> <span class="nav-text">Socket TCP牛刀小试</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#%E6%8A%A5%E6%96%87%E3%80%81%E5%8D%8F%E8%AE%AE%E3%80%81Mac%E5%9C%B0%E5%9D%80"><span class="nav-number">1.4.</span> <span class="nav-text">报文、协议、Mac地址</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#IP%E3%80%81%E7%AB%AF%E5%8F%A3%E3%80%81%E8%BF%9C%E7%A8%8B%E6%9C%8D%E5%8A%A1%E5%99%A8"><span class="nav-number">1.5.</span> <span class="nav-text">IP、端口、远程服务器</span></a></li></ol></li></ol></div></div><div class="site-overview-wrap sidebar-panel"><div class="site-author motion-element" itemprop="author" itemscope itemtype="http://schema.org/Person"><p class="site-author-name" itemprop="name">张龙</p><div class="site-description" itemprop="description"></div></div><div class="site-state-wrap motion-element"><nav class="site-state"><div class="site-state-item site-state-posts"><a href="/archives/"><span class="site-state-item-count">18</span> <span class="site-state-item-name">日志</span></a></div><div class="site-state-item site-state-categories"><a href="/categories/"><span class="site-state-item-count">3</span> <span class="site-state-item-name">分类</span></a></div><div class="site-state-item site-state-tags"><a href="/tags/"><span class="site-state-item-count">4</span> <span class="site-state-item-name">标签</span></a></div></nav></div></div></div></aside><div id="sidebar-dimmer"></div></div></main><footer class="footer"><div class="footer-inner"><div class="copyright">&copy; <span itemprop="copyrightYear">2022</span> <span class="with-love"><i class="fa fa-heart"></i> </span><span class="author" itemprop="copyrightHolder">张龙</span></div></div></footer></div><script src="/lib/anime.min.js"></script><script src="/lib/velocity/velocity.min.js"></script><script src="/lib/velocity/velocity.ui.min.js"></script><script src="/js/utils.js"></script><script src="/js/motion.js"></script><script src="/js/schemes/pisces.js"></script><script src="/js/next-boot.js"></script></body></html>