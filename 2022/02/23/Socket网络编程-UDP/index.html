<!DOCTYPE html><html lang="zh-CN"><head><meta charset="UTF-8"><meta name="viewport" content="width=device-width,initial-scale=1,maximum-scale=2"><meta name="theme-color" content="#222"><meta name="generator" content="Hexo 6.0.0"><link rel="apple-touch-icon" sizes="180x180" href="/images/apple-touch-icon-next.png"><link rel="icon" type="image/png" sizes="32x32" href="/images/favicon-32x32-next.png"><link rel="icon" type="image/png" sizes="16x16" href="/images/favicon-16x16-next.png"><link rel="mask-icon" href="/images/logo.svg" color="#222"><link rel="stylesheet" href="/css/main.css"><link rel="stylesheet" href="/lib/font-awesome/css/all.min.css"><script id="hexo-configurations">var NexT=window.NexT||{},CONFIG={hostname:"example.com",root:"/",scheme:"Pisces",version:"7.8.0",exturl:!1,sidebar:{position:"left",display:"post",padding:18,offset:12,onmobile:!1},copycode:{enable:!1,show_result:!1,style:null},back2top:{enable:!0,sidebar:!1,scrollpercent:!1},bookmark:{enable:!1,color:"#222",save:"auto"},fancybox:!1,mediumzoom:!1,lazyload:!1,pangu:!1,comments:{style:"tabs",active:null,storage:!0,lazyload:!1,nav:null},algolia:{hits:{per_page:10},labels:{input_placeholder:"Search for Posts",hits_empty:"We didn't find any results for the search: ${query}",hits_stats:"${hits} results found in ${time} ms"}},localsearch:{enable:!1,trigger:"auto",top_n_per_article:1,unescape:!1,preload:!1},motion:{enable:!0,async:!1,transition:{post_block:"fadeIn",post_header:"slideDownIn",post_body:"slideDownIn",coll_header:"slideLeftIn",sidebar:"slideUpIn"}}}</script><meta name="description" content="socket网络编程系列之二"><meta property="og:type" content="article"><meta property="og:title" content="Socket网络编程-UDP"><meta property="og:url" content="http://example.com/2022/02/23/Socket%E7%BD%91%E7%BB%9C%E7%BC%96%E7%A8%8B-UDP/index.html"><meta property="og:site_name" content="SteveZhang博客"><meta property="og:description" content="socket网络编程系列之二"><meta property="og:locale" content="zh_CN"><meta property="og:image" content="http://example.com/images/image-20220223041049378.png"><meta property="og:image" content="http://example.com/images/image-20220223041928608.png"><meta property="og:image" content="http://example.com/images/image-20220223043704494.png"><meta property="og:image" content="http://example.com/images/image-20220223043759297.png"><meta property="og:image" content="http://example.com/images/image-20220223043917355.png"><meta property="og:image" content="http://example.com/images/image-20220223044332934.png"><meta property="og:image" content="http://example.com/images/image-20220223044637416.png"><meta property="og:image" content="http://example.com/images/image-20220223044730763.png"><meta property="article:published_time" content="2022-02-22T20:02:51.000Z"><meta property="article:modified_time" content="2022-05-17T03:58:10.000Z"><meta property="article:author" content="张龙"><meta name="twitter:card" content="summary"><meta name="twitter:image" content="http://example.com/images/image-20220223041049378.png"><link rel="canonical" href="http://example.com/2022/02/23/Socket%E7%BD%91%E7%BB%9C%E7%BC%96%E7%A8%8B-UDP/"><script id="page-configurations">CONFIG.page={sidebar:"",isHome:!1,isPost:!0,lang:"zh-CN"}</script><title>Socket网络编程-UDP | SteveZhang博客</title><noscript><style>.sidebar-inner,.use-motion .brand,.use-motion .collection-header,.use-motion .comments,.use-motion .menu-item,.use-motion .pagination,.use-motion .post-block,.use-motion .post-body,.use-motion .post-header{opacity:initial}.use-motion .site-subtitle,.use-motion .site-title{opacity:initial;top:initial}.use-motion .logo-line-before i{left:initial}.use-motion .logo-line-after i{right:initial}</style></noscript><link rel="alternate" href="/atom.xml" title="SteveZhang博客" type="application/atom+xml"></head><body itemscope itemtype="http://schema.org/WebPage"><div class="container use-motion"><div class="headband"></div><header class="header" itemscope itemtype="http://schema.org/WPHeader"><div class="header-inner"><div class="site-brand-container"><div class="site-nav-toggle"><div class="toggle" aria-label="切换导航栏"><span class="toggle-line toggle-line-first"></span> <span class="toggle-line toggle-line-middle"></span> <span class="toggle-line toggle-line-last"></span></div></div><div class="site-meta"><a href="/" class="brand" rel="start"><span class="logo-line-before"><i></i></span><h1 class="site-title">SteveZhang博客</h1><span class="logo-line-after"><i></i></span></a></div><div class="site-nav-right"><div class="toggle popup-trigger"></div></div></div><nav class="site-nav"><ul id="menu" class="main-menu menu"><li class="menu-item menu-item-home"><a href="/" rel="section"><i class="fa fa-home fa-fw"></i>首页</a></li><li class="menu-item menu-item-archives"><a href="/archives/" rel="section"><i class="fa fa-archive fa-fw"></i>归档<span class="badge">18</span></a></li></ul></nav></div></header><div class="back-to-top"><i class="fa fa-arrow-up"></i> <span>0%</span></div><main class="main"><div class="main-inner"><div class="content-wrap"><div class="content post posts-expand"><article itemscope itemtype="http://schema.org/Article" class="post-block" lang="zh-CN"><link itemprop="mainEntityOfPage" href="http://example.com/2022/02/23/Socket%E7%BD%91%E7%BB%9C%E7%BC%96%E7%A8%8B-UDP/"><span hidden itemprop="author" itemscope itemtype="http://schema.org/Person"><meta itemprop="image" content="/images/avatar.gif"><meta itemprop="name" content="张龙"><meta itemprop="description" content=""></span><span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization"><meta itemprop="name" content="SteveZhang博客"></span><header class="post-header"><h1 class="post-title" itemprop="name headline">Socket网络编程-UDP</h1><div class="post-meta"><span class="post-meta-item"><span class="post-meta-item-icon"><i class="far fa-calendar"></i> </span><span class="post-meta-item-text">发表于</span> <time title="创建时间：2022-02-23 04:02:51" itemprop="dateCreated datePublished" datetime="2022-02-23T04:02:51+08:00">2022-02-23</time> </span><span class="post-meta-item"><span class="post-meta-item-icon"><i class="far fa-calendar-check"></i> </span><span class="post-meta-item-text">更新于</span> <time title="修改时间：2022-05-17 11:58:10" itemprop="dateModified" datetime="2022-05-17T11:58:10+08:00">2022-05-17</time></span></div></header><div class="post-body" itemprop="articleBody"><p>socket网络编程系列之二</p><span id="more"></span><h2 id="Socket网络编程-UDP"><a href="#Socket网络编程-UDP" class="headerlink" title="Socket网络编程-UDP"></a>Socket网络编程-UDP</h2><h3 id="1-UPD是什么"><a href="#1-UPD是什么" class="headerlink" title="1.UPD是什么"></a>1.UPD是什么</h3><p>那么前面一个章节呢咱们算是过得轻松又愉快，因为前面一个章节是一个基础的章节，那本章节呢其实也是一个基础章节，本章节名字叫做socket - u d p快速入门。<br>那么在本章节当中呢最主要的收获是</p><p>第一，带领大家明白u d p是什么。<br>二、udp的主要作用是什么？<br>三、udp的简要用法及其api的学习。<br>第四、就是理解网络当中的单播、广播以及多播的概念。</p><p>当然了，关于api的学习以及广播、多播的概念和运算，那么这是重点，也是本章节需要掌握的重点知识点。<br>好的，废话不多说，我们进入到第一个章节，udp是什么？<br>udp的英文单词是user datagram Protocol，缩写为udp。<br>那么udp是一种用户数据报协议，又称为用户数据报文协议。<br>它是一种基于报文的协议，而不是面向链接的一种协议，它与tcp不同。<br>tcp是基于链接的协议，而udp是基于一种用户数据报的协议，它是一个简单的面向数据报的传输层的协议，正式的规范为rfc 768。<br>那么这个文件呢我们不做细究。<br>好了，我们继续往下看，它是一个用户数据协议，非连接协议，这是重点，它不是连接协议。<br><strong>udp的发起和接收是不需要进通过连接，仅仅只需要直接发送以及你在对应端口上进行监听接收即可，它不需要两个客户端一定是连接的。</strong></p><p><strong>常常我们会说tcp和udp最大的区别是什么？</strong><br>tcp是面向连接的，然后tcp是传输可靠的，而udp是面向数据报的，那么他们两个是不一样的，从而也导致了udp在大家的认知当中是不可靠的。<br>那我们来说一下它为什么不可靠。<br>第一点，它一旦把应用程序给到应用层的数据发送出去之后，就不进行保留数据备份是什么意思呢？<br>就是说在udp的数据层面，他只管发送或者是接收数据，而不对这个数据进行保存、备份、重发等等。<br>ud p在ip数据报的头部，仅仅加入了复用和数据校验的字段.</p><p>那么在后面呢我们会给大家讲解一下它具体加了一些什么样的东西。<br><strong>在发送端是产生数据</strong>，<strong>而在接收端从网络当中去抓取数据，所以说它们两者是不需要进行连接的。</strong></p><p>但是也正因为它不是一个连接的协议，它是靠客户端发送协议，服务器端从网络当中去抓取协议，它抓取的时间以及你发送的时机如果说不相同，那么可能会导致客户端发送的数据服务器端没有接收到。</p><p><strong>在udp当中其实是没有标准的客户端与服务器端的。</strong></p><p>udp结构简单、没有校验速度快、容易丢包。<br>但是呢它有一个优点可以<strong>广播</strong>，那么广播呢也是我们后面讲解的一个重点。</p><p>好的，我们来看一下udp它的主要职能是什么，udp能够做些什么这样的事情。<br>那么第一点是可以作为dns、tftp、snmp<br>当然说一下最后一点，s n m p就是我们之前说的一个网络数据协议传输当中的一个监控的一个协议。<br>t f t p呢跟f t p差不了太多，其实也就是用一种文件传输的协议dns，这是非常常见的一个东西。<br>在咱们访问一个网站防百度、访问谷歌的时候，其实要进行的第一步操作就是dns解析。<br><strong>那么dns解析呢其实实则就是用的udp来完成的的相关功能。</strong><br><strong>那么还可以做什么事情呢可以用于视频、音频的传输以及普通的数据。</strong><br>那么这个普通数据呢要求的是无关紧要的数据，因为咱们前面也说了，udp是不保证传输的可靠性的，udp存在一定的丢包，以及可能存在udp的数据混乱的一个问题。<br>那么所以这里的普通数据一定要是一个无关紧要的数据。<br>那么音频然后视频呢这个就不多说了，因为音频和视频本身就比较大。<br>当然了，音频和视频一般而言是用于咱们的一个实际的直播，或者是用于一个我们家里面的有线电视之类的，那么就是用于udp进行传输。</p><p>而如果说你要下载一个视频或者是一个音频文件，这个时候还用udp吗？<br>肯定不是，他使用的tcp，因为这是一个文件传输，也要保证它的可靠性，所以说这个时候是使用的tcp。</p><p>好的，我们这个来看一下咱们的这个udp的前面的一个报文头，他做了些什么样的事情，也就是咱们的一个数据协议前面udp加了什么东西。</p><p><img src="/../images/image-20220223041049378.png" alt="image-20220223041049378"></p><p>然后我们首先看一下它一共有多少个位一共有64位对不对？<br>64位怎么看前面的第一行是32位，第二行32位加在一起也就是64位。<br>因为四位呢我们来看一下前面的这一个部分，也就是0到15的这个部分，它一共是多少是16位。<br>16位呢的话它存储的是什么存储的是发送源的ip地址，那么后面的16位来存储的是咱们的一个接收者的，也就是目标的一个端口号，对不对？<br>而前面呢16位存储的是我们发送的端口号，对吧？<br>紧跟着后面的16位存储的是什么是一个字节长度，对不对存储的是一个字节长度，以及再到后面这个位置，是咱们的一个头部以及数据的一个校验字段，所以说都在这里了都在这里，它一共是16位。那么加在一起呢也就是64位。<br>好了，这里呢我们需要进行一定的细化，给大家讲解一些从图上面不能直接看出的一些东西。<br>首先我们看第一点，端口号的保存。<br>前面分别用了32位保存端口号，那么这里呢其实有一个点需要说明的是，第一个0到15是多少？<br>是16位，16位的话它其实是多少个字节是2个字节对不对？<br>两个字节其实就是一个短整型。<br>那么紧接着我们往后面看一点，这前面的端口用短整型来存储，这是够的，对吧？<br>因为咱们端口是多少0到65535，对不对？<br>好的。往后面看一下，紧跟着的它的存储的，咱们传输的这个后面的数据的长度是多少数据的长度是放在这16个位当中，而这16个位呢也是相当关于一个短整型，也就是一个短整型的一个长度，用来存储我们的后面的数据部分的长度，对不对用一个短点型存储。<br>那么后面是一个校验的教研的部分呢，我们就不多说，我们来说一下，我们发送一个udp究竟能够带多大的数据出去它究竟能够发多大的包一次udp最多能够发多长的数据出去？<br><strong>一个udp包最大的长度是多少呢？</strong><br>首先我们来看一下，16位，也就是2个字节，也就是咱们说的一个短整型存储的长度信息对吧存储长度信息，那么它的二了16位减去一也就是等于64k减去一也就等于65536减1其实也就等于65535个字节长度。<br>那么是不是我们就可以发六五三五个字节长度呢？<br>其实不是，因为咱们前面的头部还占用了一部分的信息。<br>头部。<br>诶我们说我们前面的头部有多少，未来的64个位，对吧？<br>自身协议其实是占用了多少64位是多少啊？<br>32加32位等于64位，其实也就等于咱们的8字节对吧八字节的长度，65535减去八个字，也就等于六五零七个字节。<br>所以说咱们最多发送的数据长度是六五五零七，这个点一定要记住。</p><p><img src="/../images/image-20220223041928608.png" alt="image-20220223041928608">当你要发送的数据长度大于六五零七的时候，一定要记住自己要进行一次分包然后交给udp进行传输，udp最大的传输一次包的一个大小最多是六五零七个字节长度。<br>好的，当本章节的内容就到此结束，那么下一个章节呢会给大家讲解一下咱们u d p的核心api信息。<br>请大家。</p><h3 id="2-UDP核心API"><a href="#2-UDP核心API" class="headerlink" title="2.UDP核心API"></a>2.UDP核心API</h3><p>咱们接着往下讲，那么我们在本小节来讲解一下u d p 的一些核心a p i 讲解为什么要有这个章节呢？主要是因为为了咱们后面写代码的时候，不至于让大家一下就懵逼了。所以说我们专门有一个小节讲解一下核心的a p i 信息。当然了，这个章节是一个比较小的章节，因为毕竟不是跳代码，所以说咱们只是在p p t 当中过一遍咱们的a p i 即可。好的，我们进入到课程内容。<br>首先咱们来看一下a p i 当中的第一个类datagramsocket。</p><p>这个呢是用于接收与发送u d p 的一个类。这个类是咱们u d p 当中最重要的一个类，它的主要作用与职责是用于接收和发送u d p 信息的一个类。所有的u d p 信息，可以说都是经过disagrees socket 发送出去以及接收u d p 的一个包的协议。<br>也是通过data grasp 的接收到了。<br>负责发送某一个udp 包或者接收一个ud p 包<strong>不同于t c p, u d p 的协议，并没有被合并到socket a p i 当中。因为在咱们的t c p 当中，我们的t c p 的操作其实是有合并到咱们的一个socket 协议当中去</strong>。咱们的开头就是某某什么什么socket。那么我们有一个socket 的一个服务器，以及有一个socket 的一个客户端的存在。</p><p>但是在咱们的u d p 当中是没有服务器与客户端的概念。<strong>你的datagramsocket既是你的服务器，也是你的客户端，他可以发送，也可以接受</strong>。他不需要去监听某一个客户端，因为他不涉及客户端跟他的连接，所以说他不像t c p 一样，需要先去监听一个t c p 的一个来源，然后连接t c p，然后再进行通讯。这里面相当于其实就是直接两个服务器之间的参数了。或者说你可以理解为就是<strong>两个客户端</strong>之间的传输，它没有服务器端，也没有客户端，它既是服务器也是客户端。<br>接着往下说一下datagramsocket就是它的构造函数用于创建一个简单的实例。这个实例当中没有传递任何参数，所以说它不指定端口 i p。如果说这个时候你用这个datagramsocket进行发送，<strong>那么它会自动复用你本地的可用的一个端口进行发送数据</strong>。当然了，i p 就是你自己本机的i p 了，datagramsocket(int port) 指定端口，那么就是创建一个监听固定端口的一个实例。这是用于监听某一个端口的实例，就是说你的数据来源可以通过这个端口进行收到信息。但是你的发送并不是这里指定的这个端口。假如说你想要通过datagramsocket 发送一个数据包出去，你就算在这里指定了两千的端口。那么你想把一个数据发送出去的时候，是发送到哪呢？是发送到这个两千吗？其实并不是你并不是发送到这里指定的那个port 这个端口上面。这个port 端口其实只是指你接收数据的端口。datagramsocket(int port,inetaddress localaddr)这个时候是一个两个构造参数的一个构造函数。那么它创建的是一个固定端口以及指定i p 的一个实例。当你的计算机本地有多个i p 地址的时候，那么这个时候有效你可以指定只监听你的绝网的某一个端口，或者是你想监听你的一个互联网的一个i p 地址的一个端口。<br>因为你的电脑可能具备多个i p 地址，因为你可能处于某一个子网。同时你的电脑下面还有一个子网。那么这个时候你其实是有两个机器以上的i p 地址存在的。接着往下说。<br>我们调用datagramsocket.receive(DatagramPacket d) 的时候。<br>这个时候就是你接收一个什么，接收一个DatagramPacket 这就是一个咱们u d p 报文的一个封装类。<br>他完成了工作呢，咱们后面再讲解发送也是一样，就是DatagramPacket 传输进去的也就是一个DatagramPacket 。可以看到这里我们发送和接收其实都是传入的一个DatagramPacket 这样的一个实例。这个实例既可以用于接收，也可以用发送数据。<br>那么我们看一下一些设置项did so turn out。那么设置一个超时时间，这是用于咱们进行传输或者是监听的时候的一个超时时间。当然还有一个最重要的就是close 关闭以及释放资源。<br>好了，我们来看一下前面所说的describe packet disagreement。packet 是一个用于处理报文。</p><p>同时将byte数组目标地址、目标的端口等数据包封装成报文，或者将报文拆成byte数组的一个封装类。</p><p>它的这个类主要作用是什么呢？就是将咱们的这个byte数组，byte数组是什么？就是咱们要传输的内容，这个数字的长度是多少？我们之前前面有讲过65507，那么这个东西呢就是我们要传输的实际的一个数据，将这个数据以及咱们目标的一个端口地址。其实这个地方没有目标地址，这个目标地址虽然我们可以指定一个目标地址，但是呢它其实是用于发送当中的一个传输协议去做的。而实际的咱们的一个报文呢是没有目标地址的。那么其实相当于就是将byte 数组以及目标端口混装成咱们的报文，或者是将报文反向拆解成为一个bad 数据，以及咱们的一个目标端口。但目标地址就是属于咱们传输当中的一个另外的一个。i p 层面的一个传输地址的协议。data ground package 是u d p 的一个发送实体，也是接收实体。</p><p>我们来看一下它的一些构造函数，这是ground packet。这里呢是传递进去的一个bad 数组，以及一个bad 数组可用的一个区间的指定。这两个参数就是用于指定咱disagree packet 里面的这个buffer 这个内容，它具体的可用区间。那么后面那两个参数是用于指定咱们的接收者的一个地址信息。前三个参数指定的是buffer 以及buffer 的一个使用。<br>后面两个参数主要指定是目标机器地址与端口。<br>那么这个目标机器地址与端口仅仅用于发送时有效。那么在咱们发送一个数据的时候，是通过data grand package 这个东西来指定你具体的接收者的一个信息。他的信息是什么？是通过这些grand packet 来进行设置它接收的信息。我们想要接收别人发过来的信息，那么我们要用的是这是grand socket，也是我们前面用的这是grand socket 去进行一个监听，这也是这个grand packet 的一个各自函数。前面三个不用多说是一样的。<br>那么后面传递的是一个socket address。其实socket address 其实就相当于electorates 加quite electorates，其实就是一个什么呀目标主机的地址，再加上一个端口，socket 其实相对两者的一个封装，以及它的一些协议的封装。<br>那么我们来看一下data ground package 的一些使用方面的一些信息。那么首先第一点shed data。那么我们可以在构造函数创建的时候传入一个吧。<br>同理，我们也可以在构造函数中不传递任何东西。我们传递无参构造函数，然后在后面的过程，我们set data 用于替换一个buffer 音律。buffer 呢可以传递一个buffer 进去，也就是一个bad 数组。然后同时指定这个bad 数组当中的一个长度信息。我们究竟哪部分数据是有效的？那我们可以在这里指定，当然你也可以不指定信息。那么自然也就是从零开始到你整个buffer 结束，就用于单独设置你这个buffer 留下的区间有多长啊？<br>get data, get off, fit, get lunch. 那么这三个方法呢就是前面它的三个信息的一个返回。<br>紧接着我们往下看一下一些设置的信息，sit to s 当然这里也是一样，就是设置目标的地址端口以及目标地址的一个i p 地址信息。<br>get 呢也是一样，get address, get pot 是一样的。<br>后面就是set scott dress 前面我们说了scottish 其实就相当于我们前面的i like dress 和pot 的一个封装。当然了get socket dress 其实也是一样的道理。那么这里我再次重申一下咱们data grand package 这个当中设置的这个目标地址以及端口，其实是用于发送时有效。在我们接收的时候其实是无效的。你指定的端口或者是目标地址其实是无效的。只有仅仅用于你要把一个describe packet 这个信息发送出去的时候，那么这个是有效的。而你接受的时候，这些东西有什么作用呢？这个在你接触的时候，其实这个操作是由系统帮你完成的。当你接收到一个数据报的时候，相当于是他会把报文解析之后给你set 这个信息，以及set 了你的这个八份信息。那么你就可以拿到你接收到的发送过来的就是说你是。<br>你的电脑我的电脑给你发的信息，那么你就可以收到我的电脑的i p 以及我的电脑的端口。那么你就能知道那这个data grandpa 是从哪个电脑的哪个端口传输过来的。<br>那么我想要监听别人发送过来数据肯定要有一个端口。这个端口呢就是在咱们的data grass socket 当中指定的。<br>那么本章节讲解了两个，最主要的类也就是data ground socket 和data ground packet 两个。<br>适用于咱们u d p 传输当中的一个主要的a p i。<br>我们主要的a p i 讲解。最后啊我们下一个章节讲解一下咱们的一个广播以及多播的概念。<br>好的，谢谢大家。</p><h3 id="3-UDP单播、广播、多播"><a href="#3-UDP单播、广播、多播" class="headerlink" title="3.UDP单播、广播、多播"></a>3.UDP单播、广播、多播</h3><p>我们前面呢进行了一些基础的一些信息的一些讲解，以及咱们a p i的一个讲解。<br>这个章节呢给大家讲解一下咱们u d p当中的一个单播、多播以及广播三个概念是什么呢？<br>要给大家讲解一下。<br>这也是u d p最区别于tcp的一个地方，就是单播、多播或者是广播。<br>然后首先第一点，单播。<br>咱们的单播究竟是什么东西呢？<br>就是点对点。<br>假如我的电脑和你的电脑之间发生数据，你的电脑也和我的电脑之间回送数据，我们两个数据不被其他人的电脑所感知，那么这就称之为单播。</p><p><img src="/../images/image-20220223043704494.png" alt="image-20220223043704494"></p><p>顾名思义，假如你在公司，你的老板单独来说，我想要找编号为89757的这个人，叫他来我来办公室一趟，那么这个时候编号89757一定是一个指定的人，一定是一个固定的人，那么这个时候就是一个单播，那么就直接找到你对吧？<br>你就是89757。<br>那么找到一。就是你所以说这就是单播用于单线，两者之间与其他人无关，那么这就是单播的一个概念。<br>要来说一下第二点，多播。</p><p><img src="/../images/image-20220223043759297.png" alt="image-20220223043759297"></p><p>多多是什么意思啊就是说我们从这个图当中可以看得出，红色的点是咱们的一个发送者，对吧？<br>接受的是什么接受者有黄点和咱们的一个绿点，而绿点呢三个都是绿点黄点三个都是黄点。<br>多播是什么意思啊？<br>其实多播它并不叫多播，其实应该叫做组播，它是给一组设备发送。<br>这个当中其实就分为了两个组，一个组呢是咱们的一个绿色组成的一个组，还有一个组呢是咱们的这个黄色组成的组。<br>那么我现在发出来就是给所有绿色的这些设备发送信息，那么黄色的设备自然它无法接收到这个信息，这就称之为多播，或者是叫做组播，组播更为恰当一点。<br>因为它不是说你给多个人发的意思，它其实是给一个组发的一个意思。<br>那么这个东西也很好理解，在你在街上你直接说一下，所有的男生请过来。<br>那么这时候男生和女生是不一样的，男生是一个组，女生以及其他位置性别的一些人，那么就是无关的，对吧？<br>那么你要的其实就是是一部分男性的东西，你要给他们传输什么、说什么，这是你的信息，你要做的事情与其他人无关，他们也不会收到这样的信息，这就称之为多播。</p><p>那么最后一点也就是咱们的广播，广播是什么意思？</p><p><img src="/../images/image-20220223043917355.png" alt="image-20220223043917355"></p><p>就是给所有的设备都发送信息，那么这就称之为广播。<br>就是一个局域网内的所谓设备，或者是你给你局域网以外的设备发送一个广播。<br>那么这里要说的，咱们的广播一定比多播更强嘛？<br>其实不是的，其实最先出来的概念是单播，然后是广播。<br>这也是为什么咱们的title叫做单播广播，最后才是多播。<br>其实多播是后面出来的概念，而多播这个概念它其实涵盖了单播与广播的优点。<br>广播是什么意思？<br>广播就是你在它广场上拿着一个喇叭直接吼了一句，那么所有的人，无论男女老少，全部都能收到你的这个信息对吧？<br>那么至于究竟有哪些人真正有用，那这就是无干的了。<br>就比如你在广场上直接拿着广播，吼了一句，所有的年轻人请过来一下。<br>那么这个时候虽然说你要的是年轻人，但是你在广场上直接用喇叭去吼的，那么所有的年轻人、老年人或者是小孩、或者是男生、女生都能收到你的信息。<br><strong>而之所以只有这部分年轻人过来了，是因为其他设备认为这个信息与我无关，所以说他就选择了不处理。</strong><br>那么这就是广播，广播就是说你对你所在的。<br>网段之内的所有设备直接发送一条信息，究竟这个网段之内哪些设备对你这个信息感兴趣，那么就是对你的设备应该要做的事情的一个处理了。<br>那么当然这会找到造成的问题，就是如果说一旦某一个设备或者是某一批设备一直发送广播的话，会导致咱们的一个局域网或者是某一个网络段之类的一些信息带宽被占满，也就导致了咱们的一个信息的一个混乱。<br><strong>所以说咱们现在的路由器都具备一个拒绝发送广播的一个策略。</strong><br>当你的广播发送出去之后，一般而言仅仅只能够在你的路由器内部进行广播，而不能在你路由器以外的地方去广播。<br>我现在在我家里面我发一个广播，你家里面的电脑能收到吗？<br>肯定不能啊，这就是因为我的广播发送之后，在我家的路由器上面已经被拦截了，仅仅只在咱们家里面的这个路由器下面的这。<br>设备之间进行广播，而路由器以外的设备是无法感知的。<br><strong>而多播的优势是什么呢？</strong></p><p>它能够直接给指定的设备发送这些信息。<br>那同理，我们举的广场上吼喇叭的这个例子来说，我们之前说的是我们直接去吼喇叭，这个时候呢我们换一种东西。<br>我看见下面有男生、有女生、有年轻人对吧，我这时候直接过去，我把所有的男性全部挑出来，挑出来之后我直接对这一部分男性说，这个时候是什么呢？<br>我虽然也是直接对一批人说，但是我<strong>提前会进行一步什么筛选</strong>，我能够提取出我<strong>真正有用的</strong>这一部分的设备，然后我再对这一部分设备进行发送信息。<br>那么这个时候呢我这一批设备一定是对这个东西感兴趣。<br>我对来信的这部分人说，我给你们介绍一个找女朋友的机会对吧，那么这个事就是我对他们说的心，他们都是感兴趣的。<br><strong>这就是多播与广播之间的区别</strong>，多播他一定是能够先进行一定的分组以及筛选之后我直接对这一部分数据发送数据。<br>它的优势是比广播更好，性能也更优越，但是它相对实现起来要复杂一点。<br>当然多播其实有专门的多播的一个地址广播有广播的地址，而我们常用的其实这个广播。<br>所以说咱们后面有个例子呢其实也是用的一个广播。<br>多播呢大家可以了解一下，在今后的一些实现当中呢，自己去实现一下咱们的一个多播，其实多播比广播更优越。<br>当然单播其实这个东西你只是说点对点之间是非常优越的。<br>如果说你想要一次性对六个人发消息，那么你采用点对点的话，你需要给六个目标地址重复发，那么这是你需要发六次。<br>而多么和广播呢其实你只需要发一次，你并不是说你给这些人发了这么多次，你仅仅只需要发一次。<br>至于他们怎么收到这个信息，是由路由器来负责转播的那么。<br>这个操作过程当中不需要你进行操作，所以说你电脑的s带宽以及你电脑cpu的性能消耗是非常低的。<br>前面说了单播广播以及咱们的多播。<br>那么来说一下，具体这几者之间的区别是什么呢？<br>这就涉及到ip地址一个类别的一个选择了。</p><p><img src="/../images/image-20220223044332934.png" alt="image-20220223044332934">这是一个abc de五个网络ip地址的一个类别的一个图，a类地址呢也就是咱们最外围的一部分的地址。<br>那么这部分点前面我们说过，已经被分配完成了，对吧？<br>啊b类以及咱们的c类，其实我们常规使用的家庭里面的这部分设备都是属于c类的。<br>我们的子网源码一般而言都是二五五点二五点零。<br>其实我们可以看得出，指往年嘛，abc分别是前面每到后面就多了一个二五，对吧？<br>那么到我们的cn的时候，其实二五五后面是点名，然后我们的ip地址一般而言是幺九。<br>二点幺六八点多少多少，对吧？<br>所以说这就是幺九二到二二三之间，这就是属于咱们c类的一个地址。<br>第一类呢是从二二四到二三九之间的一个基准。<br>这个地址呢是专门为多播预留的，所以说多播之所以比广播更优越，也是因为多播它是专门有一部分地址用于多播的，这部分地址是一份预留的地址，这是能够被所有的路由器所感知的，所以多播其实是更为优越的。<br>那么一类地址呢是实验性的，用于研究的，那么这部分地址我们不做考究。</p><p>来说一下我们怎么样去得到一个广播地址。<br>首先我们看一下二五，五点二五点二五，四个二五其实是一个受限的广播地址。<br>假如你往这个二五五点二五点二五这下面的两千端口号发送一个信息，其实只有你的局域网内的设备能够收到你发送这个信息。<br>至于他究竟对这个信息感不感兴趣，就看他对没对两千的这个端口进行监听。<br>那么c网的一个广播地址一般而言是前面三位当然是不固定的，那当然了第一位是固定的幺九二对吧，第一位是咱们的幺九二到二二三，至于后面两个呢是不固定的。<br>咱们后面的一个就是二五五，这是咱们的一个非网的一个广播地址。<br>一般而言就是幺九二点幺六、八点幺点二五五。<br>如果说你想要为你家里面的路由器下面的所有设备发送一个广播呢，两个办法。<br>一个呢是发送全二五五的一个授权广播地址，或者是直接发送幺九二点幺六、八点幺点二五，这就是给你下面的设备发送一个广播。<br>当你除了给c网，还可以给b网的一个子网段下面的设备发送一个广播，那么这就涉及到你不同的广播地址的运算了。<br>一般而言，咱们的广播地址就是最后一位为二五五。<br>第一类的ip地址为多报预留，这是我们前面讲过的。<br>来看一下咱们的一个寻常的一个网络信息。<br>这是我的电脑的一个信息。</p><p><img src="/../images/image-20220223044637416.png" alt="image-20220223044637416">可以看出我的电脑的一个信息是ipv四地址对吧，幺九二点幺六、八点幺二、四点七，这是我的ip地址。<br>那么我的路由器的地址是多少呢？<br>幺九二点幺六、八点幺二四点幺，对吧。<br>我的指望颜码是二五五点二五点二五五点零，这是我的指望野马。<br>而指望野马呢一般。<br>而言，最后一位是您，但是您并不是百分百的。<br>我们前面的三位是固定的二五五点二五点二五，那么后面一位并不一定就是零，前面三位都是二五，就是c网地址。<br>那么最后一个呢取决于咱们的一个路由器的一个分配策略。<br>我们后面来看一下ip地址的一个构成。</p><p><img src="/../images/image-20220223044730763.png" alt="image-20220223044730763"></p><p>这是一个ip地址，幺九二点幺六八点一百点一，我们把它分为四个部分，其实四个部分加在一起，每一个部分呢是一个int，对吧？<br>其实呢正方我们用的不是一个硬的去存储这个值，这一个整体呢是用了一个什么短点型去存储的，这是一个八位这也是一个八位。<br>其实这个东西用一个bat这一个bad case，一共就是四个比特，四个字节去惩处它。<br>那么其实四个字节就是int，指咱们的一个ip地址，用一个int值全部就可以完成。<br>就是有人说。<br>明明这里是四个int对吧？<br>那么这里要说的是这个地方的四个input，它最大数是多少是零到多少，零到二五或者是负的幺二七到幺二八之间，对不对？<br>那么这是咱们的一个范围。<br>那么这个范围呢其实并不是占用了一个全部的int的值范围，我们把它进行一定的概括之后的话，在下面可以看得出其实是八位八位加八位，其实这一共就是高八位以及低八位的一个过程嘛对吧？<br>我们把四个八位加在一起其实就是三十二位，三十二位其实就相当于一个intent值，我们把这一个东西全部加在一起，其实可以直接构成一个intent值。<br>那么来看一下幺九二，其实就是幺幺后面六个零对吧，这个地方比较重要。<br>幺九二前面两位是幺幺，后面几位是零。<br>而最后一个点幺的话那么就是最后一个为零，这个东西呢涉及到一个二进制的一个转换，那么这个点大家记一下就好。<br>来看一下我们一个广播地址的一个运算。<br>广播地其实是可以运算出来的，而不是固定的。<br>来看一下我们的ip地址，就拿我的电脑来说，幺九二点幺六、八点幺二、四点七对吧，就是我的电脑的ip地址。<br>而我的磁网源码是多少呢？<br>是二五五点二五点二、五点零。<br>二五五相当于什么二五五相当于我们前面刚刚说的那个地方是多少三十二位对吧三十二位当中分为八位八位八位八位的对吧分别是四个八位，那么二五五就相当于八位全部为一零就相当于八位全部为零对吧，所以前面就是八位全部唯一八位后面全部为零。<br>那么我的网络地址是多少呢？<br>我的网络地址其实相当于就是把一和上面的这个东西进行一个以后运算，那么最后得到的就是幺九二点幺六、八点幺二、四点零，因为我最后一位是零，那么您与前面的每一个运算中其实就是一个零。<br>那么我的广播地址是多少呢？<br>前面的。<br>个网段的最后一位就是我的广播地址我前面网络地址，这个网段磁网源码是二五五点二五点零。<br>那么我具备的设备是多少多少位？<br>我基本的设备是二百五十五个设备我允许分配二百五十五个ip地址，那么我的第一个ip地址是我的网络地址，最后一个ip地址是我的广播地址。<br>这个问题就比较简单，你把你的指纹源码和你ip的进行一个有效运算，然后最终会得到你的网络地址，而网络地址得到之后同时再去看最后一位，最后一位如果是零，您的话代表着我的八个比特全部都是，八个比的全部都是零的情况下，我允许分配二百五十五个ip地址，那么我的第一个零就代表我的网络地址，我的最后一位二五五就代表我的广播地址。<br>那么是不是所有的推广的广播地址后面都是点二五五的？<br>错的。<br>那继续往下看一下，这里也是一个网络列表。<br>也是我的本级地理幺九二点幺六、八点幺二、四点七。<br>假如我的指网点码是二五五点二五五点二五点幺九二呢，那么这时候我的网络地址是多少？<br>一样的，网上面以后运算掉我的值是一样的，依然是幺九二点幺六、八点幺二、四点零。<br>而我的广播地址是多少？<br>广播地址其实后面并不是点二五五了，为什么呢？<br>因为在这里有多少个一就代表着我有多少个网段地址，那么网的地址怎么运算呢？<br>其实我们说了，它其实是八个位，八个位的话前面两位为幺幺，后面是零零。<br>那么幺幺就带有两个对吧？<br>我们按照二进制来算，二的两次方其实就是四我可以分为四个段。<br>而我的幺幺九、二点幺六、八点幺二、四点七是处于咱们的第一个段当中，所以说我的ip地址是属于我的第一个段的最后一个ip。<br>那么我第一个段的最后一个id就是幺九二点幺六。<br>八点幺二、四点六三。<br>我们需要往后面再给大家看一下。<br>怎么算的呢？<br>二五五点二五点二五点幺九二，其实它相当于就是三十二个比特，对吧？<br>前面都是幺幺幺，最后一个把握的前面是幺幺，后面是六个零。<br>那么我允许划分的网段是二的多少次方呢？<br>两个幺二的二次方，也就是四个网段。<br>分别是哪四个网段？<br>分别是最后一位为零到六十三，六十四到一百二十七、一百二十八到一百九十一，一百九十二到二五五。<br>而我前面一台我自己的设备是属于幺九二点幺六、八点幺二、四点七，对吧？<br>那么七是属于第一个网站。<br>第一个我的我的一个保留地址是多少？<br>幺九二点幺六八点幺二、四点零，那我的广播地址是最后一位，也就是幺九二点幺六八点幺二、四点六三，这也就是。<br>我的广播地址，所以说广播地址最后一位不一定是二五五。<br>同理，我们来说一下广播通讯的一个问题。<br>我们来说一下两台主机之间是否允许广播直接通讯。<br>第一个主机幺九二点幺六，八点幺二四点七，它的主板源码是二五五点二五点二、五点幺九二。<br>第二台主机幺九二点幺六、八点幺二、四点一百，它的子网源码呢也是一样的。<br>那么这两台主机可以直接允许广播通讯，把我的主机发送广播之后，主机二能够收到吗？<br>其实这是不能的。<br>为什么呢？<br>我们前面也说了，运算广播地址之后，其实主机的广播地址是幺九二点幺六、八点幺二四点六三，而我的主机二是处于第二个网段内，我主机二的广播地址只是幺九二点幺六、八点幺二、四点幺二七，那么它两个的广播地址本身就不一样，你在主机一类发的广播，其实主机二并不能收到。<br>就算你发送的是一个受限广播地址二五五点。<br>二、五点二五点二五，那么依然指标也无法收到，这就是广播通讯之间的一个广播地址的运算的问题。<br>那么大家呢在后面的过程当中可以自己再去查询一下我们的一个广播地址如何运算。<br>那么好的，我们本章节呢就差不多到此结束了。<br>那后面一个章节呢我们会进行一个案例的一个实操，真正的来进行实现一个广播的一个发送以及广播的一个信息接收。<br>谢谢大家。</p></div><footer class="post-footer"><div class="post-nav"><div class="post-nav-item"><a href="/2022/02/22/Socket%E7%BD%91%E7%BB%9C%E7%BC%96%E7%A8%8B-%E5%85%A5%E9%97%A8/" rel="prev" title="Socket网络编程-入门"><i class="fa fa-chevron-left"></i> Socket网络编程-入门</a></div><div class="post-nav-item"><a href="/2022/02/25/Jetpack%E7%B3%BB%E5%88%97%E2%80%94paging%E6%A1%86%E6%9E%B6%E5%8E%9F%E7%90%86/" rel="next" title="Jetpack系列—paging框架使用和原理(基于paging-runtime-2.1.0版本)">Jetpack系列—paging框架使用和原理(基于paging-runtime-2.1.0版本) <i class="fa fa-chevron-right"></i></a></div></div></footer></article></div><script>window.addEventListener("tabs:register",()=>{let e=CONFIG.comments["activeClass"];if(CONFIG.comments.storage&&(e=localStorage.getItem("comments_active")||e),e){let t=document.querySelector(`a[href="#comment-${e}"]`);t&&t.click()}}),CONFIG.comments.storage&&window.addEventListener("tabs:click",t=>{t.target.matches(".tabs-comment .tab-content .tab-pane")&&(t=t.target.classList[1],localStorage.setItem("comments_active",t))})</script></div><div class="toggle sidebar-toggle"><span class="toggle-line toggle-line-first"></span> <span class="toggle-line toggle-line-middle"></span> <span class="toggle-line toggle-line-last"></span></div><aside class="sidebar"><div class="sidebar-inner"><ul class="sidebar-nav motion-element"><li class="sidebar-nav-toc">文章目录</li><li class="sidebar-nav-overview">站点概览</li></ul><div class="post-toc-wrap sidebar-panel"><div class="post-toc motion-element"><ol class="nav"><li class="nav-item nav-level-2"><a class="nav-link" href="#Socket%E7%BD%91%E7%BB%9C%E7%BC%96%E7%A8%8B-UDP"><span class="nav-number">1.</span> <span class="nav-text">Socket网络编程-UDP</span></a><ol class="nav-child"><li class="nav-item nav-level-3"><a class="nav-link" href="#1-UPD%E6%98%AF%E4%BB%80%E4%B9%88"><span class="nav-number">1.1.</span> <span class="nav-text">1.UPD是什么</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#2-UDP%E6%A0%B8%E5%BF%83API"><span class="nav-number">1.2.</span> <span class="nav-text">2.UDP核心API</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#3-UDP%E5%8D%95%E6%92%AD%E3%80%81%E5%B9%BF%E6%92%AD%E3%80%81%E5%A4%9A%E6%92%AD"><span class="nav-number">1.3.</span> <span class="nav-text">3.UDP单播、广播、多播</span></a></li></ol></li></ol></div></div><div class="site-overview-wrap sidebar-panel"><div class="site-author motion-element" itemprop="author" itemscope itemtype="http://schema.org/Person"><p class="site-author-name" itemprop="name">张龙</p><div class="site-description" itemprop="description"></div></div><div class="site-state-wrap motion-element"><nav class="site-state"><div class="site-state-item site-state-posts"><a href="/archives/"><span class="site-state-item-count">18</span> <span class="site-state-item-name">日志</span></a></div><div class="site-state-item site-state-categories"><a href="/categories/"><span class="site-state-item-count">3</span> <span class="site-state-item-name">分类</span></a></div><div class="site-state-item site-state-tags"><a href="/tags/"><span class="site-state-item-count">4</span> <span class="site-state-item-name">标签</span></a></div></nav></div></div></div></aside><div id="sidebar-dimmer"></div></div></main><footer class="footer"><div class="footer-inner"><div class="copyright">&copy; <span itemprop="copyrightYear">2022</span> <span class="with-love"><i class="fa fa-heart"></i> </span><span class="author" itemprop="copyrightHolder">张龙</span></div></div></footer></div><script src="/lib/anime.min.js"></script><script src="/lib/velocity/velocity.min.js"></script><script src="/lib/velocity/velocity.ui.min.js"></script><script src="/js/utils.js"></script><script src="/js/motion.js"></script><script src="/js/schemes/pisces.js"></script><script src="/js/next-boot.js"></script></body></html>